---
title: "Mainnet 0 4 25 Migration"
category: "kb"
---

# Homestead (upgrade to production protocol)

## set up the base contracts
```
Authority 0x307B265c6Ab333b63e739936722cc8E62D78Cc19
baseContracts['Authority'].setWhitelister(accounts[0], true)

DragoRegistry(authorityAddress) 0xde6445484a8dcd9bf35fc95eb4e3990cc358822e


VaultEventful 0x577f7a234869deb4fbaef7eb30dd2cce70b2e2e6

authority.setVaultEventful(vaultEventful.address)


VaultFactory(registry, dao (accounts(0) ,authority) 0xf8237ed149dc5285ba91a598cdd312c605f2f6c9

authority.whitelistFactory(vaultFactoryAddress, true) //for blacklisting input 0


DragoEventful 0xd79483f44f7be4ff09226b90daf6fbc3a209a340

authority.setDragoEventful(dragoEventful.address)


DragoFactory(registry, accounts(0), authority) 0x6000f8fd5db35e17b4e25cba72933165708fbf86

authority.whitelistFactory(dragoFactory.address, true)


ExchangesAuthority 0x13d3045021c19d8e2480be22e4552b2b527c8966

authority.setExchangesAuthority(exchangesAuthority.address)

exchangesAuthority.setWhitelister(baseAccount, true)
```



## this is the ethfinex exchange

```

ExchangeEfx 0xdcDb42C9a256690bd153A7B409751ADFC8Dd5851

exchangesAuthority.whitelistExchange(exchangeEfx.address, true)

tokentransferproxy automatically generated by exchangeEfx 0x7e03d2b8edc3585ecd8a5807661fff0830a0b603


AEthfinex 0x25f1fea9447a29f98890808836d845ba914b7f25

exchangesAuthority.setExchangeAdapter(
    exchangeEfx.address,
    aEthfinex.address
  )
```


## ethfinex wrapper addresses
```
ETH token 0x0000000000000000000000000000000000000000 APPROVED

ETH wrapper 0xaA7427D8f17D87a28F5e1ba3aDBB270bAdbe1011 APPROVED


NEC token 0xcc80c051057b774cd75067dc48f8987c4eb97a5e

NEC wrapper 0xc94Ec1f80C4423ae0CECb4296B5dE530219F0f9D


GRG token 0x4FbB350052Bca5417566f188eB2EBCE5b19BC964

GRG wrapper NA


USDT token 0xdac17f958d2ee523a2206206994597c13d831ec7 APPROVED

USDT wrapper 0x1a9B2d827F26B7d7C18fEC4c1B27c1E8dEeBa26e APPROVED


ZRX token 0xe41d2489571d322189246dafa5ebde1f4699f498

ZRX wrapper 0xCf67d7A481CEEca0a77f658991A00366FED558F7


OMG token 0xd26114cd6ee289accf82350c8d8487fedb8a0c07

OMG wrapper 0x60f8526f09caaF0008187945ccd88Bc43790042C

```


## for wrappers

```
baseContracts['ExchangesAuthority'].whitelistWrapper(tokenWrapper, true)

baseContracts['ExchangesAuthority'].whitelistTokenOnWrapper(
        tokenAddress,
        tokenWrapper,
        true


for signature hash whitelisting

methodSignature = await web3.eth.abi.encodeFunctionSignature(methodInterface)
```

## whitelist method on adapter  byte4(keccak256(method))
```
ExchangesAuthority.whitelistMethod(methodSignature, ethfinexAdapterAddress, true)


wrapToEfx 0x236fb132
unwrap 0x4e5b60f4
```

## AWeth
```
"0x70623508": "unwrapEth(address,uint256)",
"0xb3bc1a13": "wrapEth(address,uint256)"
```

## in order to wrap some tokens, much send tokens to a drago, so he can forward alt must swap and then wrap

baseContracts['RigoToken'].transfer(dragoAddress, GRGtokensAmount)

```
NavVerifier 0x3e3ae732343ef5bdac2e43feeb7bf1e43ecd947e

authority.setNavVerifier(navVerifier.address)


SigVerifier 0x29ac51737a85b87cbb10adaad16c46bedffda734

exchangesAuthority.setSignatureVerifier(sigVerifier.address)
```

## then update the addresses in the parity registry to upgrade the application:
note: parity registry has not been updated yet. Also we are deprecating it.

```

authority-v2

dragoeventful-v2

dragofactory-v2

dragoregistry-v2

vaulteventful-v2

vaultfactory-v2
```

## for the reference, parity registry address: 0xe3389675d0338462dC76C6f9A3e432550c36A142
```
Function: setAddress(bytes32 _name, string _key, address _value) *** Key = A
```
